<html>

<head>

	<script>
		var saldo = 100.0;
		var nome = "";
		var extratoList = "Extrato desse mês: \n\n *Lembrando que vai começar a aparecer informação quando fazer operações \n\n Mercadinho: R$100 \n\n";

		nome = prompt("Qual seu nome?")


		alert("Olá "+ nome +" é um prazer ter você por aqui!")

		inicio();

		function inicio() {
			var escolha = parseInt(prompt('Selecione uma dessas opçôes:\n\n 1.) Saldo\n\n 2.) Extrato \n\n 3.) Saque\n\n 4.)Depósito \n\n 5.) Tranferência\n\n 6.) Sair'));


			switch(escolha){

				case 1:
					ver_saldo();
					break
				case 2:
					ver_extrato();
					break
				case 3:
					fazer_saque();
					break
				case 4:
					fazer_deposito();
					break
				case 5: 
					transferencia();
					break
				case 6:
					sair();
					break
				default:
					erro2();
					break
			}
		}		


		function ver_saldo() {
			if(senha() == true){
				alert('Seu saldo atual é: ' + saldo);
				inicio();
			}else{
				alert("Senha inválida");
				inicio();
			}
		}

		function fazer_deposito() {
			var deposito = parseFloat(prompt('Qual o valor para depósito?'));
			if(deposito <= 0){
					erro();
					fazer_deposito();
			}else{
				if (isNaN(deposito) || deposito === '') {
					erro()
					fazer_deposito();
				} else {
					saldo += deposito;
					extratoList += "Depósito: R$" + deposito + "\n\n";
					inicio();
				}
			}
		}

		function fazer_saque() {
			if(senha() == true){
				var saque = parseFloat(prompt('Qual o valor para saque?'));
				if(saque > saldo || saque <= 0){
					alert("Operação não autorizada. Saque menor ou maior que o saldo disponivel. Saldo disponível: " + saldo);
					fazer_saque();
				}else{
					if (isNaN(saque) || saque === '') {
						erro()
						fazer_saque();
					} else {
						saldo -= saque;
						extratoList += "Saque: R$" + saque + "\n\n";
						inicio();
					}
				}
			}else{
				alert("Senha inválida!");
				inicio();
			}
		}

		///saldo, sacar dinheiro, retirar o extrato

		function erro2() {
			alert('Por favor, informe um número entre 1 e 6');
			inicio();
		}

		function sair() {
			alert(`${nome}, foi um prazer ter você por aqui!`);
			var confirma = confirm('Você deseja sair?');
			if (confirma == true) {
				window.close();
			} else {
				inicio();
			}
		}

		function ver_extrato(){
			if(senha() == true){
				alert(extratoList);
				inicio();
			}else{
				alert("Senha inválida!");
				inicio();
			}
		}

		function transferencia(){
			if(senha() == true){
				var numConta = parseInt(prompt("Digite o número da conta para tranferencia: "));
				if (isNaN(numConta) || numConta === '' || numConta <= 0) {
					erro()
					transferencia();
				} else {
					var trasnf = parseInt(prompt("Digite o valor da tranferencia:"));
					if(trasnf > saldo || trasnf <= 0){
						alert("Operação não autorizada. Deposito menor ou maior que o saldo disponivel. Saldo disponível: " + saldo);
						transferencia();
					}else{
						saldo -= trasnf;
						extratoList += "Transferencia: R$" + trasnf + "\n\n";
						inicio();
					}
				}
			}
			else{
				alert("Senha inválda!");
				inicio();
			}
		}


		function erro(){
			alert("Operação não autorizada");
		}

		function senha(){
			var password = 3589;
			var pass = parseInt(prompt("informa a senha"));
			if(pass == password){
				return true;
			}else{
				return false;
			}
		}
	</script>
</head>

<body>

</body>

</html>